"0","list_of_data_to_clean$messy_aki.xlsx %>% 
  # Extract only the essential rows
  slice(5:25) %>% 
  # Remove empty columns
  select(-6) %>% 
  # Set the first row as column names
  set_names(.,.[1,]) %>% 
  # Remove redudant first row
  slice(-1) %>% 
  # Tidy column names
  rename_with(~tolower(str_replace(.x, ""^(?i)day.*?(\\d).*"",""day\\1_gfr""))) %>% 
  rename_with(~str_replace_all(.x,""\\s+"",""_"")) %>% 
  # Tidy the entries of birthdate column
  arrange(desc(dob)) %>% # Arrange to detect patterns of anomalies
  # Convert 5-digit general numbers to ISO dates
  mutate(dob_temp = openxlsx::convertToDate(dob), .after = dob) %>% 
  # Edit special cases
  mutate(dob_temp = case_match(dob, ""may 5 1970"" ~ ymd(""1970-05-05""), ""5=11-1984""~ ymd(""1984-05-11""), .default = dob_temp))  %>% 
  # Rename ""dob"" to ""birthdate"" and remove ""dob"", ""dob_temp""
  mutate(birthdate = dob_temp, .after = study_id) %>% 
  select(-dob_temp,-dob) %>% 
  mutate(race = str_to_sentence(race)) %>% 
  mutate(sex = if_else(str_detect(sex,""^(?i)M""), ""Male"",""Female"")) %>% 
  mutate(hispanic = if_else(str_detect(hispanic, ""^(?i)N""), ""Not Hispanic"", ""Hispanic"")) %>% 
  mutate(day2_gfr_poor = if_else(str_detect(day2_gfr,""poor""),1,0)) %>% 
  mutate(across(c(study_id,admission_gfr:day5_gfr), ~as.integer(str_extract(.x,""^\\d+"")))) %>% 
  # mutate(hd_catheter = factor)
  count(sediment) %>% 
  pull(sediment)
"
"2","Warning: [38;5;252mThere was 1 warning in `mutate()`.[39m
[38;5;252m[36mâ„¹[38;5;252m In argument: `dob_temp = openxlsx::convertToDate(dob)`.[39m
Caused by warning in `openxlsx::convertToDate()`:
[33m![39m NAs introduced by coercion"
"1","[1]"
"1"," ""many epi cell casts""       "
"1"," ""many epithelial cell casts"""
"1"," ""many granular casts""       "
"1"," ""muddy brown""               "
"1"," ""muddy brown casts""         "
"1","
"
"1","[6]"
"1"," ""rare gran casts""           "
"1"," ""rare granular casts""       "
"1","
"
